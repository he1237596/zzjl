(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19ca1502"],{"098d":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("router-link",{attrs:{to:{name:"goods.detail",params:{goodsId:t.item.itemId}},tag:"div"}},[s("div",{staticClass:"item-wrap"},[s("div",{staticClass:"item-img-wrap"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.item.goodsPic,expression:"item.goodsPic"}],attrs:{alt:"",loading:"../assets/img-loading.png"}})]),s("div",{staticClass:"item-text",domProps:{textContent:t._s(t.item.title)}}),s("div",{staticClass:"item-text item-text-red",domProps:{textContent:t._s(t.item.subtitle)}}),s("div",{staticClass:"item-text item-text-red"},[t._v("\n\t\t\t￥"),s("span",{staticClass:"item-price",domProps:{textContent:t._s(t.item.salePrice)}})]),s("div",{staticClass:"item-text item-volume"},[t._v("\n\t\t\t销量:"),s("span",{domProps:{textContent:t._s(t.item.volume)}}),t._v(" 好评率:\n\t\t\t"),s("span",{domProps:{textContent:t._s(t.item.evalGoodRate?t.item.evalGoodRate:100)}}),t._v("%\n\t\t")])])])},o=[],a=(s("cadf"),s("551c"),s("097d"),{name:"ListRow",props:{item:{type:Object,default:function(){return{}}}}}),n=a,r=(s("4865"),s("2877")),c=Object(r["a"])(n,i,o,!1,null,"c92a6384",null);c.options.__file="ListRow.vue";e["a"]=c.exports},4865:function(t,e,s){"use strict";var i=s("5b0f"),o=s.n(i);o.a},"5b0f":function(t,e,s){},"794b":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[s("div",{staticClass:"search-wrap"},[s("form",{attrs:{target:"frameFile"},on:{submit:function(t){t.preventDefault()}}},[s("mt-search",{attrs:{"cancel-text":"取消",placeholder:"搜索",show:t.isShow},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.reSearch(t.keyword)},"!focus":function(e){t.isShow=!0},"!blur":function(e){t.isShow=!1}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"search-panel"},[t.hotList.length>0?s("div",{staticClass:"search-panpel-title"},[t._v("热门搜索"),s("span",{staticClass:"change-items",on:{click:function(e){return e.stopPropagation(),t.getHotList(e)}}},[t._v("换一批")])]):t._e(),s("div",{staticClass:"search-items"},t._l(t.hotList,function(e,i){return s("span",{key:i,domProps:{textContent:t._s(e.title)},on:{click:function(s){t.reSearch(e.title)}}})}),0),s("div",{staticClass:"search-panpel-title"},[t._v("历史搜索"),s("span",{staticClass:"delete-items",on:{click:t.clearHistory}},[t._v("清除")])]),t.historyList.length>0?s("div",{staticClass:"search-items"},t._l(t.historyList,function(e,i){return s("span",{key:i,domProps:{textContent:t._s(e)},on:{click:function(s){t.reSearch(e)}}})}),0):s("div",{staticClass:"no-more"},[t._v("\n\t\t\t\t\t\t暂无数据\n\t\t\t\t\t")])])])],1),s("iframe",{staticStyle:{display:"none"},attrs:{name:"frameFile"}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isShow,expression:"!isShow"}],staticClass:"goods-wrap"},[s("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"goods",attrs:{"infinite-scroll-immediate-check":"false","infinite-scroll-disabled":"loading","infinite-scroll-distance":"2"}},t._l(t.goodsList,function(e,i){return t.goodsList.length>0?s("li",{key:i,staticClass:"goods-item"},[s("list-row",{attrs:{item:e}})],1):t._e()}),0),t.goodsList.length>0&&t.noMore?s("div",{staticClass:"no-more"},[t._v("没有更多数据...")]):t._e(),t.loading?s("div",{staticClass:"loading"},[s("mt-spinner",{attrs:{type:"triple-bounce",color:"rgb(100, 100, 100)"}})],1):t._e()]),0!=t.goodsList.length||t.isShow?t._e():s("div",{staticClass:"no-search-result"},[t._v("暂无数据")])])},o=[],a=s("098d"),n={name:"search",data:function(){return{goodsList:[],pageNum:1,pageSize:10,noMore:!1,loading:!1,selectType:1,keyword:"",historyList:[],isShow:!0,hotList:[]}},created:function(){this.$route.params.cateId&&(this.isShow=!1,this.getList()),this.getHotList()},methods:{getHotList:function(){var t=this;this.$http.post(this.api.default.get_hot_search,{}).then(function(e){if(1e4==e.code){for(var s=JSON.parse(e.data),i=0;i<s.length;i++)s[i].title=s[i].title.substring(0,20);t.hotList=s}},function(t){})},refreshHotList:function(){this.getHotList()},setHistory:function(t){console.log(t);var e=JSON.parse(sessionStorage.getItem("historyList"))||[];console.log(e),e.indexOf(t)>=0&&e.splice(t,1),""!==t&&e.unshift(t),e.length>=15&&(e=e.slice(0,15)),this.historyList=e,sessionStorage.setItem("historyList",JSON.stringify(e))},clearHistory:function(){sessionStorage.removeItem("historyList"),this.historyList=[]},reSearch:function(t){this.pageNum=1,this.goodsList=[],this.noMore=!1,this.loading=!1,this.isShow=!1,this.loadMore()},loadMore:function(){var t=this;this.noMore||(this.isMoreLoading=!0,this.loading=!0,setTimeout(function(){t.getList()},100))},getList:function(){var t=this;this.setHistory(this.keyword),this.$http.post(this.api.default.goods_list,{page:{pageNum:this.pageNum,pageSize:this.pageSize},cateId:this.$route.params.cateId,selectType:this.selectType,title:this.keyword,belongOneDistriId:"cf1ce74f-6fec-42f0-b28d-acb3e2fc8831",userId:"6bc57b3b-532b-4202-af6c-fe033da3151d"}).then(function(e){1e4==e.code&&(t.pageNum+=1,t.loading=!1,t.isMoreLoading=!1,e.data.length<t.pageSize&&(t.noMore=!0),t.goodsList=t.goodsList.concat(e.data))},function(t){})}},components:{ListRow:a["a"]}},r=n,c=(s("a2c5"),s("2877")),l=Object(c["a"])(r,i,o,!1,null,"01bc1ef6",null);l.options.__file="Search.vue";e["default"]=l.exports},a2c5:function(t,e,s){"use strict";var i=s("d7d2"),o=s.n(i);o.a},d7d2:function(t,e,s){}}]);